# ═══════════════════════════════════════════════════════
# CARAVAN / ZeroG — Server Configuration
# ═══════════════════════════════════════════════════════
#
# Variables marked [REQUIRED] must be set for the server to start.
# Variables marked [OPTIONAL] enable additional features when set.
# Commented-out variables show example values for reference.
#

# ───────────────────────────────────────────────────────
# DATABASE  [REQUIRED]
# ───────────────────────────────────────────────────────
# Connection string for the primary database (PostgreSQL).
DATABASE_URL=postgresql://user:password@localhost:5432/zerog?schema=public
# Direct connection URL — bypasses connection pooler, used for migrations only.
# DIRECT_URL=postgresql://user:password@localhost:5432/zerog?schema=public
#
# Supabase Production example:
# DATABASE_URL=postgresql://postgres.[PROJECT_REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres
# DIRECT_URL=postgresql://postgres.[PROJECT_REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres?pgbouncer=false

# ───────────────────────────────────────────────────────
# AUTHENTICATION  [REQUIRED]
# ───────────────────────────────────────────────────────
# Secret key for signing JWTs — generate with: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-here-change-me
# Token lifetime (e.g. "7d", "24h")
JWT_EXPIRES_IN=7d

# ───────────────────────────────────────────────────────
# SERVER  [REQUIRED]
# ───────────────────────────────────────────────────────
PORT=5180
NODE_ENV=development

# ───────────────────────────────────────────────────────
# URLs  [REQUIRED for production, have sensible defaults locally]
# ───────────────────────────────────────────────────────
# Comma-separated allowed origins for CORS
CORS_ORIGIN=http://localhost:3000
# Public-facing server URL (used for local file-storage URLs)
SERVER_URL=http://localhost:5180
# Public-facing app URL (used in invite links, referrals, email templates)
APP_URL=http://localhost:3000
# Frontend URL (used in email templates — defaults to APP_URL if not set)
FRONTEND_URL=http://localhost:3000
# Client URL (used for Stripe redirect URLs — defaults to APP_URL if not set)
CLIENT_URL=http://localhost:3000
# Domain name for embed URLs (e.g. Twitch player parent param)
# DOMAIN=localhost

# ───────────────────────────────────────────────────────
# LOGGING  [OPTIONAL]
# ───────────────────────────────────────────────────────
# Levels: error | warn | info | http | verbose | debug | silly
LOG_LEVEL=info

# ───────────────────────────────────────────────────────
# REDIS  [OPTIONAL — enables caching, real-time socket.io, queues]
# ───────────────────────────────────────────────────────
# REDIS_URL=redis://localhost:6379

# ───────────────────────────────────────────────────────
# RATE LIMITING  [OPTIONAL — has sensible defaults]
# ───────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ═══════════════════════════════════════════════════════
# MEDIA STORAGE  [REQUIRED — defaults to local filesystem]
# ═══════════════════════════════════════════════════════

# Provider: local | supabase | s3 | r2
STORAGE_PROVIDER=local
STORAGE_BUCKET=og-media
# Local upload directory (only used when STORAGE_PROVIDER=local)
UPLOAD_DIR=./uploads

# ── Supabase Storage  [OPTIONAL — set when STORAGE_PROVIDER=supabase]
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_SERVICE_KEY=your-service-role-key

# ── AWS S3  [OPTIONAL — set when STORAGE_PROVIDER=s3]
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=us-east-1

# ── Cloudflare R2 (S3-compatible)  [OPTIONAL — set when STORAGE_PROVIDER=r2]
# R2_ACCESS_KEY_ID=
# R2_SECRET_ACCESS_KEY=
# R2_ENDPOINT=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com
# R2_PUBLIC_URL=https://media.yourdomain.com

# ── Cloudinary (image/video transforms)  [OPTIONAL]
# CLOUDINARY_CLOUD_NAME=
# CLOUDINARY_API_KEY=
# CLOUDINARY_API_SECRET=

# ═══════════════════════════════════════════════════════
# CDN / SIGNED URLs  [OPTIONAL]
# ═══════════════════════════════════════════════════════
# Secret for signing media URLs (auto-generated if not set)
# URL_SIGNING_SECRET=
# CDN base URL for public media
# CDN_URL=https://cdn.yourdomain.com
# Upload endpoint for signed upload URLs
# STORAGE_URL=https://storage.yourdomain.com

# ═══════════════════════════════════════════════════════
# EMAIL — Resend  [OPTIONAL — enables invite & transactional emails]
# ═══════════════════════════════════════════════════════
# When not set, email-dependent features log warnings instead of sending.
# RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxx
# EMAIL_FROM=noreply@0gravity.ai
# EMAIL_FROM_NAME=0G Platform

# ═══════════════════════════════════════════════════════
# OAUTH PROVIDERS  [OPTIONAL — enables social login]
# ═══════════════════════════════════════════════════════
# ── Google
# GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com

# ═══════════════════════════════════════════════════════
# SECURITY / ENCRYPTION  [OPTIONAL]
# ═══════════════════════════════════════════════════════
# 2FA & message encryption key (hex, 64 chars / 32 bytes)
# Generate with: openssl rand -hex 32
# ENCRYPTION_KEY=

# ═══════════════════════════════════════════════════════
# PAYMENTS — Stripe  [OPTIONAL — enables subscriptions & billing]
# ═══════════════════════════════════════════════════════
# When not set, subscription endpoints return a 503 "Stripe is not configured" error.
# STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxx

# ═══════════════════════════════════════════════════════
# MONITORING — Sentry  [OPTIONAL — enables error tracking]
# ═══════════════════════════════════════════════════════
# SENTRY_DSN=https://xxxxxxxx@o0.ingest.sentry.io/0

# ═══════════════════════════════════════════════════════
# LIVE STREAMING — Mux  [OPTIONAL — enables live streaming features]
# ═══════════════════════════════════════════════════════
# MUX_TOKEN_ID=your-mux-token-id
# MUX_TOKEN_SECRET=your-mux-token-secret
# MUX_WEBHOOK_SECRET=your-mux-webhook-signing-secret
