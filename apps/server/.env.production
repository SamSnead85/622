# 0G Server Production Environment Configuration
# =================================================
# Set these in Railway Dashboard > Variables

# ==============================================
# REQUIRED - Must be set for production
# ==============================================

# Database (Supabase session-mode pooler — port 5432)
# The app auto-appends: ?pgbouncer=true&connection_limit=10&sslmode=require
# Get from: Supabase Dashboard > Settings > Database > Connection string > Session mode
DATABASE_URL="postgresql://postgres.[PROJECT_REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres"
# Direct connection for migrations only (bypasses pgBouncer)
DIRECT_URL="postgresql://postgres.[PROJECT_REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres?pgbouncer=false"

# JWT Secret — MUST be cryptographically random, 32+ chars
# Generate with: openssl rand -base64 32
JWT_SECRET="REPLACE_WITH_OUTPUT_OF_openssl_rand_base64_32"

# Encryption key for field-level encryption (2FA, sensitive data at rest)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY="REPLACE_WITH_OUTPUT_OF_openssl_rand_hex_32"

# CORS Origins — NEVER use "*" in production
# Comma-separated list of your actual frontend domains
CORS_ORIGIN="https://0gravity.ai,https://www.0gravity.ai,https://six22.app,https://www.six22.app"

# Environment
NODE_ENV="production"

# Server port (Railway handles this, but just in case)
PORT="5180"

# Public-facing URLs (required for file URLs, invite links, Stripe redirects)
SERVER_URL="https://caravanserver-production-d7da.up.railway.app"
APP_URL="https://0gravity.ai"
FRONTEND_URL="https://0gravity.ai"
CLIENT_URL="https://0gravity.ai"

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_WINDOW_MS="60000"
RATE_LIMIT_MAX_REQUESTS="100"

# ==============================================
# GOOGLE OAUTH
# ==============================================
# Get from: Google Cloud Console > APIs & Services > Credentials
# (Real value set below in OPTIONAL SERVICES section)

# ==============================================
# STORAGE CONFIGURATION - Choose ONE provider
# ==============================================

# Option 1: Supabase Storage (Recommended - already have Supabase)
STORAGE_PROVIDER="supabase"
STORAGE_BUCKET="og-media"
SUPABASE_URL="https://YOUR_PROJECT_REF.supabase.co"
SUPABASE_SERVICE_KEY="your-supabase-service-role-key"

# Option 2: AWS S3 / Cloudflare R2
# STORAGE_PROVIDER="s3"
# AWS_REGION="us-east-1"
# AWS_ACCESS_KEY_ID="your-access-key"
# AWS_SECRET_ACCESS_KEY="your-secret-key"
# STORAGE_BUCKET="og-media"

# Option 3: Local storage (NOT recommended for production)
# STORAGE_PROVIDER="local"
# SERVER_URL="https://og-server-production.up.railway.app"

# ==============================================
# OPTIONAL SERVICES
# ==============================================

# Email service (for auth emails, notifications)
# RESEND_API_KEY="re_xxxxxxxxx"

# Push notifications
# ONESIGNAL_APP_ID="your-onesignal-app-id"
# ONESIGNAL_REST_API_KEY="your-onesignal-rest-api-key"

# Google OAuth (Must match Frontend)
GOOGLE_CLIENT_ID="375907036942-83ltii7u19dabirpak4j30anl7annrb7.apps.googleusercontent.com"
